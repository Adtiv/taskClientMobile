<ion-header >
  <ion-navbar color="theme">
    <button ion-button menuToggle="navItems">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-menu [content]="navItems">
      <ion-header>
        <ion-toolbar>
          <ion-title>Menu</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-list>
          <!--<button ion-button menuClose ion-item detail-none>Close Menu</button>-->
        </ion-list>
      </ion-content>
    </ion-menu>
    <ion-title center>Tasks</ion-title>
    <ion-buttons end>
      <button ion-button color="theme" (click)="navAdd()" large>
        <ion-icon color="dark" name="add-circle" large></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <ion-item>
    <ion-label>Task Filters: </ion-label>
    <ion-select style="text-align:center;" (ionChange)="filterTasks();"[(ngModel)]="taskType">
      <ion-option value="All Tasks">All Tasks</ion-option>
      <ion-option *ngFor="let customType of customTaskTypes|async" value="customType.type">{{customType.type}}</ion-option>
    </ion-select>
  </ion-item>
  <ion-segment [(ngModel)]="filterColor" primary>
    <ion-segment-button value="white" (ionSelect)="filterByColor('none')">
      All
    </ion-segment-button>
    <ion-segment-button style="background-color:rgba(255,0,0,.8);"value="red" (ionSelect)="filterByColor('red')">
      urgent
    </ion-segment-button>
    <ion-segment-button style="background-color:rgba(255,255,0,.8);"value="yellow" (ionSelect)="filterByColor('yellow')">
      upcoming
    </ion-segment-button>
    <ion-segment-button style="background-color:rgba(0,255,0,.8);"value="green" (ionSelect)="filterByColor('green')">
      future
    </ion-segment-button>
  </ion-segment>
  <ion-list>
    <ion-list-header>Showing <i>{{taskType}}</i></ion-list-header>
    <ion-item-sliding *ngFor="let task of tasks | async" (click)="navTask(task)">
      <ion-item [style.background-color]="getStyle(task)" style="text-align:center;"><ion-icon style="float:right;" name="ios-arrow-forward"></ion-icon>
        <h2><b>{{task.title}}</b></h2>
        <p style="float:left;color:black;"><b>{{task.daysTillDue}}</b> <span *ngIf="task.daysTillDue!=1">days</span><span *ngIf="task.daysTillDue==1">day</span></p>
      </ion-item>
      <ion-item-options>
        <button (click)="navEditTask(task)" primary>
          <ion-icon name="create"></ion-icon>
          Edit
        </button>
        <button (click)="deleteTask(task)"danger>
          <ion-icon name="trash"></ion-icon>
          Delete
        </button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
</ion-content>
<!-- Disable swipe-to-go-back because it's poor UX to combine STGB with side menus -->

<ion-nav [root]="rootPage" #navItems swipeBackEnabled="false"></ion-nav>